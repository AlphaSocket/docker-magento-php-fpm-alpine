#!/bin/env
#
# MAGENTO PHP IMAGE ENV VARIABLES
#
# PHP-FPM on ALPINE
#
TRUE_KEY="true"
FALSE_KEY="false"

PRD_ENV_KEY="prd"
DEV_ENV_KEY="dev"

BUILD_PHP_VERSION=$(cat ./.branch-php-version)
BUILD_ENV=$(cat ./.branch-env)
BUILD_TEMPLATE="./templates/Dockerfile"
BUILD_DESTINATION="./Dockerfile"

BUILD_PHP_FPM_PORT='9000'
BUILD_PHP_XDEBUG_PORT='9001'

# INSTALL
PHP_INSTALL_EXTENTSION_GD=$TRUE_KEY
PHP_INSTALL_EXTENTSION_ICONV=$TRUE_KEY
PHP_INSTALL_EXTENTSION_OPCACHE=$TRUE_KEY
PHP_INSTALL_EXTENTSION_READLINE=$TRUE_KEY
PHP_INSTALL_EXTENTSION_SOAP=$TRUE_KEY
PHP_INSTALL_EXTENTSION_XML=$TRUE_KEY
PHP_INSTALL_EXTENTSION_MYSQLI=$TRUE_KEY
PHP_INSTALL_EXTENTSION_CURL=$TRUE_KEY
PHP_INSTALL_EXTENTSION_JSON=$TRUE_KEY
PHP_INSTALL_EXTENTSION_CURL=$TRUE_KEY
PHP_INSTALL_EXTENTSION_MBSTRING=$TRUE_KEY
PHP_INSTALL_EXTENTSION_REDIS=$TRUE_KEY
PHP_INSTALL_EXTENTSION_ZIP=$TRUE_KEY

if [ $BUILD_PHP_VERSION = "7.2" ]; then
    PHP_INSTALL_EXTENTSION_MCRYPT=$FALSE_KEY
    PHP_INSTALL_EXTENTSION_SODIUM=$TRUE_KEY
    PHP_INSTALL_EXTENTSION_OPENSSL=$TRUE_KEY
else
    PHP_INSTALL_EXTENTSION_MCRYPT=$TRUE_KEY
    PHP_INSTALL_EXTENTSION_SODIUM=$FALSE_KEY
    PHP_INSTALL_EXTENTSION_OPENSSL=$FALSE_KEY
fi

if [ $BUILD_ENV = "dev" ]; then
    PHP_INSTALL_EXTENTSION_XDEBUG=$TRUE_KEY
else
    PHP_INSTALL_EXTENTSION_XDEBUG=$FALSE_KEY
fi

#
# ENABLE
#
PHP_ENABLE_EXTENTSION_GD=$TRUE_KEY
PHP_ENABLE_EXTENTSION_ICONV=$TRUE_KEY
PHP_ENABLE_EXTENTSION_OPCACHE=$TRUE_KEY
PHP_ENABLE_EXTENTSION_READLINE=$TRUE_KEY
PHP_ENABLE_EXTENTSION_SOAP=$TRUE_KEY
PHP_ENABLE_EXTENTSION_XML=$TRUE_KEY
PHP_ENABLE_EXTENTSION_MYSQLI=$TRUE_KEY
PHP_ENABLE_EXTENTSION_CURL=$TRUE_KEY
PHP_ENABLE_EXTENTSION_JSON=$TRUE_KEY
PHP_ENABLE_EXTENTSION_CURL=$TRUE_KEY
PHP_ENABLE_EXTENTSION_MBSTRING=$TRUE_KEY
PHP_ENABLE_EXTENTSION_ZIP=$TRUE_KEY
PHP_ENABLE_EXTENTSION_REDIS=$TRUE_KEY

if [ $BUILD_PHP_VERSION = "7.2" ]; then
    PHP_BUILD_EXTENTSION_MCRYPT=$FALSE_KEY
    PHP_BUILD_EXTENTSION_SODIUM=$TRUE_KEY
    PHP_BUILD_EXTENTSION_OPENSSL=$TRUE_KEY
else
    PHP_BUILD_EXTENTSION_MCRYPT=$TRUE_KEY
    PHP_BUILD_EXTENTSION_SODIUM=$FALSE_KEY
    PHP_BUILD_EXTENTSION_OPENSSL=$FALSE_KEY
fi

if [ $BUILD_ENV = "dev" ]; then
    PHP_ENABLE_EXTENTSION_XDEBUG=$TRUE_KEY
else
    PHP_ENABLE_EXTENTSION_XDEBUG=$FALSE_KEY
fi
